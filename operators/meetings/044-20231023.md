# Thursday, Octoner 23rd, 2023 at 9:00am PST

## Agenda

* Infrastructure SIG updates
* ONNX Tooling Painpoints
* PR [#5685](https://github.com/onnx/onnx/pull/5685): Creating models with large external tensors
* Opens

## Attendees

* Aditya Goel (Quantco)
* Alexandre Eichenberger (IBM)
* Christian Bourjau (Quantco)
* Ganesan Ramalingam (Microsoft)
* Jacky Chen (Microsoft)
* Liqun Fu (Microsoft)
* Michal Karzynski (Intel)
* Scott Cyphers (Lightmatter) 
* Xavier Dupr√© (Microsoft)
* Yuan Yao (Nvidia)
* Thiago Crepaldi (Microsoft)

## Infrastructure SIG updates

ONNX Release 1.15 is expected next week. The release candidates have been out for a while and validated.

## ONNX Tooling Painpoints

In a recent presentation to the ONNX Steering Committee, Nvidia presented some
[suggestions](https://docs.google.com/document/d/1Kf8FOWZz9OZ_lRNVhO1sxVpdwGnQ-j8lulEUCm0uQr8/)
to help ONNX Tools, based on their experience building a visual editor for ONNX models.

The first item concerns the fact that the ONNX type system for attributes does not have
an explicit boolean type, and integers are used in place of booleans. An editor interface,
however, can present a more intuitive interface for boolean attributes, if it is known
that an attribute is a boolean.

The second item is very similar, but concerns enumerated types (with a base type of either
integer or string). See the above document for more information and examples.

The suggestion is to add metadata to the operator schemas to capture such information
about attributes, so that this information is programmatically available to tools.
This involves the following steps. The first step is to extend the schema class so that such
information can be captured. The second step is to extend the schema definitions of
existing operators to add this information. Finally, new operators defined should
follow this requirement.

There was agreement to go ahead and implement the first step. As an open source
development driven by volunteers, we welcome contributions by the community to
help add the metadata to the existing operator definitions. In particular,
the plan is to ask the Nvidia team if they would be willing to help with this
step, given their experience with this.

The final item in the document involves dependencies that exist between attributes.
For example, the value of one attribute determines which other attributes must
be present or must not be present.

This item was considered to be non-trivial, deserving some further investigation.
In particular, this requires the design of a domain-specific language, involving
tradeoffs between expressiveness and simplicity. Hence, more input is required to
make a call on how best to address this requirement.

## PR [#5685](https://github.com/onnx/onnx/pull/5685): Creating models with large external tensors

This active PR focuses on a challenge in creating models with very large
initializers, specifically initializers that are greater than 2 GB in size.
Such models are becoming popular with the recent trend. The general approach
in ONNX is to store such initializers external to the model, using the
external tensor support in ONNX.

However, there is another quirk with the python API generated by protobuf
that ends up creating an issue. The python API for adding an initializer
to the list of initializers in a graph involves creating a copy of
the original initializer. And this copy fails with a crash when the object
is greater than 2GB. The existing APIs provide a way to convert a model
to the external-data format, but do not provide a convenient way to
create such models in the first place.

The above PR provides a utility to help address this issue.